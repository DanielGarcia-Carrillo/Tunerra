{% extends "base.html" %}
{% load staticfiles %}
{% block navbar %}
    <ul class="nav pull-right">
        {% if user.is_authenticated %}
            <li><a href="/accounts/feed/{{ user.username }}">Profile</a><li>
            <li><a href="{% url "logout" %}">Logout</a></li>
        {% else %}
            <li><a href="{% url "login_signup" %}">Signup/Login</a></li>
        {% endif %}
    </ul>
{% endblock navbar %}

{% block content %}
	{{block.super}}
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
    </style>
    
    
    
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDjvGKEwuVyqk_D2_jCT36tngnQViyztZc&sensor=true">
    </script>
    <script type="text/javascript">
      function getGeoLocation(){
        var startURL = 'http://maps.google.com/maps/api/geocode/json?address=';
        var endURL = '&sensor=false';
        var URL = startURL + '{{currRegion}}' + endURL;
        
        console.log(URL);
        $.get(URL, success);
      }
      
      function success(data){
        var jsonLocation = JSON.parse(data);
        var lat, lng;
        
        if (jsonLocation.status === "OK"){
        	lat = jsonLocation.results[0].geometry.location.lat;
        	lng = jsonLocation.results[0].geometry.location.lng;
        }
        else{
        	lat = 42;
        	lng = -88;
        }
        
        var mapOptions = {
          center: new google.maps.LatLng(lat, lng),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
      
      function initialize() {
      	getGeoLocation();
      	
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    
    

    <div id="map_canvas"></div>
    
    {% endblock content %}
